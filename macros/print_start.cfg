[gcode_macro PRINT_START]
gcode:
    {% set bed_temp = params.BED|default(100)|float %}
    {% set extruder_temp = params.EXTRUDER|default(220)|float %}
    {% set z_adjust = params.Z_ADJUST|default(0.0)|float %}

    _DISPLAY_COLOR R=1 G=0 B=0
    G21 # set units to millimeters
    G90 # use absolute coordinates
    M83 # use relative distances for extrusion

    BED_MESH_CLEAR                    # clear mesh

    M117 Homing
    _CG28                             # Home the printer
    G1 Z+20                           # Move up to avoid collision
    G0 X175 Y175 F12000               # Move to center
    
    M117 Heating
    M106 S255                         # set print fan to full speed
    M140 S{bed_temp}                  # Start bed heating
    M104 S{extruder_temp}             # Start nozzle heating
    M190 S{bed_temp}                  # Wait for bed to reach temperature
    M109 S{extruder_temp}             # Set and wait for nozzle to reach temperature # "M109 is so extruder is up to temp before doing z calibrate so expansion is accounted for"
    M107                              # turn print fan off

    M117 Calibrating
    QUAD_GANTRY_LEVEL PARK=false
    CLEAN_NOZZLE                      # clean nozzle
    CALIBRATE_Z
    BED_MESH_PROFILE LOAD=hot3        # load mesh if needed
    
    M117 Intro Line..
    INTRO_LINE
    M117
    _DISPLAY_COLOR